
1. 이해 가능한 코드란 그 동작이 우리의 예상에서 크게 벗어나지 않는 코드다.  
2. 객체 사이의 의존성을 완전히 없애는 것이 정답은 아니다. 객체지향 설계는 서로 의존하면서 협력하는 객체들의 공동체를 구축하는 것이다. 따라서 필요한 최소한의 의존성만 유지하고 불필요한 의존성을 제거해야 한다.
3. 객체를 인터페이스와 구현으로 나누고 인터페이스만을 공개하는 것은 객체 사이의 결합도를 낮추고 변경하기 쉬운 코드를 작성하기 위해 따라야 하는 가장 기본적인 설계 원칙이다.
4. 객체지향의 세계에서는 무생물 역시 스스로 행동하고 자기 자신을 책임지는 자율적인 존재로 취급해야 한다. 이를 의인화라고 부른다.

# 오브젝트

[종립님의 오브젝트 스터디 레포](https://github.com/johngrib/study-objects)를 가이드 삼아 테스트 코드 까지 학습한다.  

# 1장. 티켓 판매

- `Invitation` : 이벤트 당첨자에게 발송되는 초대장이며 티켓으로 교환할 수 있다.
  - 초대일자를 인스턴스 변수로 포함하는 간단한 클래스
- `Ticket`
- `Bag` : 관람객은 소지품을 보관할 용도로 가방을 항상 소지하고 있다고 가정한다. 
- `Audience` : 관람객을 의미하며, 가방을 소지한다.
- `TicketOffice` : 관람객에게 판매할 티켓과 티켓의 판매 금액이 보관되어 있으며, 초대장을 티켓으로 교환해주는 매표소이다.
  - 티켓의 목록과 판매 금액을 변수로 포함한다.
- `TicketSeller` : 판매원은 자신이 일하는 매표소에 의존하며, 티켓으로 교환해주거나 판매하는 역할을 수행한다.
- `Theater` : 관람객을 맞이하는 소극장이다.

`Theater.enter()`는 너무 많은 책임을 가지고 있다.  
소극장이 관람객의 가방을 뒤져 초대권을 확인하고 존재하면 티켓을 가방에 넣어주고, 없으면 가방에서 돈을 뺏어서 티켓을 넣어준다.  
그리고 이 티켓을 가져오는 행위도 판매원에게 묻지않고 매표소를 직접 가져와서 묻는다.  
즉, **관람객과 판매원이 소극장의 통제를 받는 수동적인 존재이기 때문에 이 입장(enter)이라는 행위를 이해하기 위해 관람객의 가방, 가방안에 있는 현금과 티켓, 초대권 그리고 판매원의 매표소까지 너무 많은 정보가 노출되어 있다는 점이다.**  
**그리하여 관람객과 판매원이 수정되면 소극장까지 영향을 받을 수 밖에 없다.**   
  
## 리팩토링하기

1. 판매원은 매표소를 노출하지 않도록 하고, 판매원이 매표소에서 티켓을 전달하며 관람객이 직접 초대권의 유무를 확인하고 티켓의 가격만큼 금액을 제출한다. [예제](https://github.com/jdalma/object/commit/f2eeafb9d98a04970109244d612757dd1018059c)
2. 관람객이 가방을 직접 뒤지지 않고 가방에게 초대권의 유무를 물어보고 티켓의 가격만큼 금액을 차감하도록 한다. [예제](https://github.com/jdalma/object/commit/b00e53a7d13f17ee2c6440dd1665bfc3e5f569f6)
3. 판매원이 매표소를 까서 직접 티켓을 가져오고 돈통에 돈을 넣기에 현재 매표소는 수동적인 클래스다. 
   1. [ ] 매표소에 관람객을 전달해서 의존성은 추가되지만 능동적인 클래스로 만드는 것이 좋을까?
   2. [x] 매표소가 관람객에 대한 의존성이 추가되진 않지만 판매원에게 제어되는 수동적인 클래스로 만드는 것이 좋을까? 

## 궁금한 점

1. TicketSeller와 TicketOffice의 의존 방향이 반대로 되어야 하지 않나? 판매원이 매표소를 알 것이 아니라 매표소가 판매원을 알아야하지 않나? 그냥 돈통이라는 의미인가?
2. 의인화를 통해 TicketSeller의 책임을 TicketOffice에 모두 전가하는 것은 어떤가? 그럼 TicketSeller는 제거될 수 있지 않나?
